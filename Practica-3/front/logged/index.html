<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link href="index.css" rel="stylesheet" type="text/css">
  <title>Random K-things</title>
</head>
<body onload="main();">

  <header>
    <h1>Random K-things</h1>
    <h2>This is a shop that sells random things seen in K-pop and K-dramas</h2>
  </header>

  <div class="side-bar">
    <div class="login">
      <p>Logged in</p>

    </div>
    <div class= "carrito">
      <a href="carrito.html">
        <button type="button" name="button">Add to cart</button>
      </a>

    </div>
    <div id="searchbar"></div>
      <input id="msg" autocomplete="off" />
      <button type="button" id="send">SEND</button>
    </div>
  </div>

  <div class="main">
    <a href="lisaboots.html">
    <div class="item">
      <img src="https://pm1.narvii.com/6506/1ef0fee244e70761691360e40e20db53077d9a51_hq.jpg" height="200px">
      <div class="description">
        <p>Lisa's ugly boots</p>
      </div>
    </div>
    </a>
    <a href="hobimask.html">
    <div class="item">
      <img src="https://i.pinimg.com/originals/e0/02/e0/e002e09a803be717ca45cec9626e8007.jpg" height="200px">
      <div class="description">
        <p>Hobi's suffocating mask</p>
      </div>
    </div>
  </a>
  <a href="front/hansolsleeve.html">
    <div class="item">
      <img src="https://kpopping.com/uploads/documents/54589.jpeg" height="200px">
      <div class="description">
        <p>Hansol's sleeve</p>
      </div>
    </div>
  </a>
  </div>
  <div id="prueba">
  </div>
</body>
<script type="text/javascript">
function main()
{
  //-- Traza de prueba
  console.log("Hola!")

  //Obtener el botón de VER del DOM
  var prueba = document.getElementById('prueba')

  //-- Obtener el párrafo del DOM donde mostrar el resultado
  //var resultado = document.getElementById('resultado');

  //-- Cuando el usuario aprieta el botón de ver los productos
  //ver.onclick = ()=>{

    //-- Crear objeto para hacer peticiones AJAX
    m = new XMLHttpRequest();

    //-- Configurar la petición
    m.open("GET","http://127.0.0.1:8080/product", true);

    //-- Cuando la haya alguna noticia sobre la peticion
    //-- ejecuta este código
    m.onreadystatechange=function(){
       //-- Petición enviada y recibida. Todo OK!
       if (m.readyState==4 && m.status==200){

         //-- La respuesta es un objeto JSON
         var o = JSON.parse(m.responseText)

         //-- Borrar el resultado anterior que hubiese en el párrafo
         //-- de resultado
         prueba.innerHTML = "";

         //--Recorrer los productos del objeto JSON


           //-- Añadir cada producto al párrafo de visualización
           resultado.innerHTML += o;

           //-- Separamos los productos por ',''

       }
     }

     //-- Enviar la petición!
     m.send();
  }


</script>
</html>
